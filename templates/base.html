<!DOCTYPE html>
{% load static %}
{% load generator %}
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href="{% static 'images/favicon/apple-icon-57x57.png' %}">
    <link rel="apple-touch-icon" sizes="60x60" href="{% static 'images/favicon/apple-icon-60x60.png' %}">
    <link rel="apple-touch-icon" sizes="72x72" href="{% static 'images/favicon/apple-icon-72x72.png' %}">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'images/favicon/apple-icon-76x76.png' %}">
    <link rel="apple-touch-icon" sizes="114x114" href="{% static 'images/favicon/apple-icon-114x114.png' %}">
    <link rel="apple-touch-icon" sizes="120x120" href="{% static 'images/favicon/apple-icon-120x120.png' %}">
    <link rel="apple-touch-icon" sizes="144x144" href="{% static 'images/favicon/apple-icon-144x144.png' %}">
    <link rel="apple-touch-icon" sizes="152x152" href="{% static 'images/favicon/apple-icon-152x152.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-icon-180x180.png' %}">
    <link rel="icon" type="image/png" sizes="192x192"  href="{% static 'images/favicon/android-icon-192x192.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'images/favicon/favicon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'images/favicon/manifest.json' %}">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="{% static 'images/favicon/ms-icon-144x144.png' %}">
    <meta name="theme-color" content="#ffffff">
    <!-- <div>Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->

    <!-- favicon ends here -->

    {% block page_title %}
    <title>T y n i U R L</title>
    {% endblock %}

    <!-- bootstrap@5.0 cdn -->
        <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
        crossorigin="anonymous"
        />
        <!-- jQuery and Bootstrap Bundle (includes Popper) -->
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
            integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
            integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
            crossorigin="anonymous"
        ></script>

    <!-- jQuery CDN -->
    <script
    src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
    
    {% block custom_css %}
    <!-- custom css -->
    <link rel="stylesheet" href="{% static 'css/home-pg-style.css' %}">
    {% endblock %}
</head>
<body>
  {% block content %}
    <div>
      <nav class="container home-page-nav">
        <div class="brand-name">
          <a href="{% url 'home' %}" class="nav-links btn btn-primary nav-btn">TyniURL</a>
        </div>
        <ul class="nav-items">
          <li>
            <a href="{% url 'about' %}" class="btn btn-primary nav-btn">About</a>
          </li>
          {% if user.is_superuser %}
          <li>
            <a href="{% url 'admin:index' %}" class="btn btn-primary nav-btn">Admin</a>
          </li>
          {% endif %}
          {% if user.is_authenticated %}
          <li>
            <a href="{% url 'accounts:logout' %}" class="btn btn-primary nav-btn">Log Out</a>
          </li>
          {% else %}
          <li>
            <a href="{% url 'accounts:login' %}" class="btn btn-primary nav-btn">login</a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </div>
    
    <!-- main body -->
    <div class="content">
      <div class="card" style="width: 40%;">
        <img src="{% static 'images/wallpaper.jpg' %}" class="card-img-top" alt="wallpaper">
        <div class="card-body">
          <div class="card-text">
            {% if user.is_authenticated %}
              <form action="" method="POST" id="user-post-form">
                {% csrf_token %}
                <div class="input-group mb-3">
                <input type="text" class="form-control" name="link" id="link" placeholder="E N T E R - L I N K" aria-label="Long Link" aria-describedby="button-addon">
                <button class="btn btn-outline-primary customize-btn" type="submit" id="button-addon">SHORTEN</button>
                </div>
              </form>
            {% else %}
              <form id="post-form">
                  {% csrf_token %}
                  <div class="input-group mb-3">
                  <input type="text" class="form-control" name="link" id="link" placeholder="E N T E R - L I N K" aria-label="Long Link" aria-describedby="button-addon">
                  <button class="btn btn-outline-primary customize-btn" type="submit" id="button-addon">SHORTEN</button>
                  </div>
              </form>
            {% endif %}
          </div>
        </div>
      </div>

      <div class="card" style="width: 85%;">
        <div class="card-body">
          <div class="">
            <section class="shorten-links">
              <h6 class="short-link">New link: <a href="#" target="_blank" id="recent"></a></h6>
            </section>
            {% if user.is_authenticated %}
              <table class="table table-striped table-hover table-fixed">
                <thead>
                  <tr class="text-center">
                    <th scope="col">#</th>
                    <th scope="col">Actual Link</th>
                    <th scope="col">Short Link</th>
                    <th scope="col">Copy Link</th>
                  </tr>
                </thead>
                <tbody>
                  {% for new_url in user_urls reversed %}
                    <tr class="text-center">
                      {% with sl_no=user_sl|gen %}
                      <td scope="row">{{ sl_no }}</td>
                      <td><a href="//{{ new_url.link }}" class="longLink">{{ new_url.link|genshortlen }}</a></td>
                      <td><a href="https://ur9.herokuapp.com/g/{{ new_url.uuid }}" target="_blank" class="shortLink" id="link{{ sl_no }}">ur9.herokuapp.com/g/{{ new_url.uuid }}</a></td>
                      <td>
                        <div
                          class="clicktocopy"
                          onmouseout="outFunc()"
                          id="row{{ sl_no }}"
                        >
                          <img 
                            src="{% static 'images/icons/link.svg' %}" 
                            alt="link-logo" 
                            class="copy-link-ico"
                          />
                          <!-- <span class="tooltiptext" id="tooltip{{ sl_no }}">Click To Copy</span> -->
                        </div>
                      </td>
                      {% endwith %}
                      <!-- <div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            {% else %}
              <table class="table table-striped table-hover table-fixed">
                <thead>
                  <tr class="text-center">
                    <th scope="col">#</th>
                    <th scope="col">Actual Link</th>
                    <th scope="col">Short Link</th>
                    <th scope="col">Copy Link</th>
                  </tr>
                </thead>
                <tbody>
                  {% for new_url in urls reversed %}
                    <tr class="text-center">
                      {% with sl_no=sl|gen %}
                      <td scope="row">{{ sl_no }}</td>
                      <td><a href="//{{ new_url.link }}" class="longLink">{{ new_url.link|genshortlen }}</a></td>
                      <td><a href="https://ur9.herokuapp.com/go/{{ new_url.uuid }}" target="_blank" class="shortLink" id="link{{ sl_no }}">ur9.herokuapp.com/go/{{ new_url.uuid }}</a></td>
                      <td>
                        <div
                        class="clicktocopy"
                        onmouseout="outFunc()"
                        id="row{{ sl_no }}"
                        >
                          <img 
                          src="{% static 'images/icons/link.svg' %}" 
                          alt="link-logo" 
                          class="copy-link-ico"
                          />
                          <!-- <span class="tooltiptext" id="tooltip{{ sl_no }}">Click To Copy</span> -->
                        </div>
                      </td>
                      {% endwith %}
                      <!-- <div>Icons made by <a href="https://www.flaticon.com/authors/cursor-creative" title="Cursor Creative">Cursor Creative</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            {% endif %}
            
          </div>
        </div>
      </div>
    </div>

  <script src="{% static 'js/app.js' %}"></script>
  
  {% endblock %}
</body>
</html>